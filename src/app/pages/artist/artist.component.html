<section class="w-full overflow-auto h-full flex flex-col gap-8">
  @if (!artist$) {
  <div>
    <app-skeleton height="208px" shape="rounded"></app-skeleton>
  </div>
  <div>
    <app-skeleton shape="rounded" width="200px" height="32px" styleClass="mb-2"></app-skeleton>
    <div class="grid gap-1">
      <app-skeleton shape="rounded" height="56px"></app-skeleton>
      <app-skeleton shape="rounded" height="56px"></app-skeleton>
      <app-skeleton shape="rounded" height="56px"></app-skeleton>
      <app-skeleton shape="rounded" height="56px"></app-skeleton>
      <app-skeleton shape="rounded" height="56px"></app-skeleton>
      <app-skeleton shape="rounded" height="56px"></app-skeleton>
      <app-skeleton shape="rounded" height="56px"></app-skeleton>
      <app-skeleton shape="rounded" height="56px"></app-skeleton>
      <app-skeleton shape="rounded" height="56px"></app-skeleton>
      <app-skeleton shape="rounded" height="56px"></app-skeleton>
    </div>
  </div>
  } @else {
  <div class="relative w-full p-6">
    <div class="absolute bg-center bg-cover rounded-lg blur brightness-[.5] left-0 right-0 top-0 bottom-0 z-[0]"
      [style.backgroundImage]="'url(' + (artist$ | async)?.picture_xl + ')'"></div>
    <div class="flex gap-2 items-end relative z-[1]">
      <img class="max-w-56 w-1/4 min-w-32 aspect-square rounded-full shadow-lg" [src]="(artist$ | async)?.picture_big"
        alt="cover" />
      <div class="flex flex-col gap-2 justify-end p-4">
        <h2 class="text-6xl font-bold text-white">{{ (artist$ | async)?.name }}</h2>
        <p class="text-white">
          {{ (artist$ | async)?.nb_fan }} Фанатов - {{ (artist$ | async)?.nb_album}} Альбомов
        </p>
      </div>
    </div>
  </div>

  <div>
    <h4 class="text-2xl text-bold mb-2">Популярные треки</h4>
    <div class="grid gap-1">
      @for(song of songs?.slice(0,5); track $index) {
      <app-song [queue]="getQueue()" [song]="song"></app-song>
      }
    </div>
  </div>

  <div>
    <div class="flex w-full justify-between">
      <h4 class="text-2xl text-bold mb-2">Альбомы</h4>
      <button>Показать все</button>
    </div>
    <div class="grid grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 3xl:grid-cols-7 4xl:grid-cols-9">
      @for(album of (albums$ | async)?.slice(0,lastIndexAlbum); track $index) {
      <div [routerLink]="['/album/' + album.id]"
        class="cursor-pointer rounded-md p-3 hover:bg-[var(--bg-color-secondary)] flex flex-col gap-2 w-full">
        <img class="rounded w-full aspect-square" [src]="album.cover_big" alt="">
        <div>
          <p class="one-stroke-text">{{album.title}}</p>
          <p class="text-[var(--text-color-secondary)]">{{album.release_date | date: 'd/MM/yy'}}</p>
        </div>
      </div>
      }
    </div>
  </div>

  @if ((related$ | async) != undefined) {
  <div>
    <div class="flex w-full justify-between">
      <h4 class="text-2xl text-bold mb-2">Схоже с творчеством</h4>
      <button>Показать все</button>
    </div>
    <div class="grid grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 3xl:grid-cols-7 4xl:grid-cols-9">
      @for(artist of (related$ | async)?.slice(0,lastIndexRelated); track $index) {
      <div [routerLink]="['/artist/' + artist.id]"
        class="cursor-pointer rounded-md p-3 hover:bg-[var(--bg-color-secondary)] flex flex-col gap-2 w-full">
        <img class="rounded-full w-full aspect-square" [src]="artist.picture_big" alt="">
        <p class="one-stroke-text">{{artist.name}}</p>
      </div>
      } @empty {
      <p class="text-[var(--text-color-secondary)]">Пусто :(</p>
      }
    </div>
  </div>
  } @else {
    склетон
  }

  @if (playlists$) {
  <div>
    <div class="flex w-full justify-between">
      <h4 class="text-2xl text-bold mb-2">Плейлисты с артистом</h4>
      <button>Показать все</button>
    </div>
    <div class="grid grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8">
      @for(playlist of (playlists$ | async)?.slice(0,10); track $index) {
      <div [routerLink]="['/playlist/' + playlist.id]"
        class="cursor-pointer rounded-md p-3 hover:bg-[var(--bg-color-secondary)] flex flex-col gap-2 w-full">
        <img class="rounded w-full aspect-square" [src]="playlist.picture_medium" alt="">
        <p class="one-stroke-text">{{playlist.title}}</p>
      </div>
      }
    </div>
  </div>
  }
  }

</section>
