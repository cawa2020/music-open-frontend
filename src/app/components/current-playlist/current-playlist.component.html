<div class="w-full">
  @if (!playlist) {
  <div class="text-[var(--text-color-secondary)] text-center">СКЕЛЕТОН!</div>
  } @else {
  <div class="grid gap-4">
    <div class="p-6 relative w-full h-full">
      <div
        class="absolute bg-center bg-cover rounded-lg blur-sm brightness-[.4] left-0 right-2 top-0 bottom-0 z-[0]"
        [style.backgroundImage]="'url(' + playlist.cover_xl + ')'"
      ></div>
      <div class="flex gap-4 items-end relative z-[1]">
        <img
          class="w-40 h-40 rounded-lg shadow-lg"
          [src]="playlist.cover_big ?? '../../../assets/placeholder.jpg'"
          alt="cover"
        />
        <div class="flex flex-col gap-2 justify-end p-4">
          <h2 class="text-4xl text-bold text-white">{{ playlist.title }}</h2>
          <h3 class="text-white">
            @if (playlist.artist?.id === 0) {
            {{ playlist.artist?.name }}
            } @else {
            <a [routerLink]="['/artist/' + playlist.artist?.id]">{{ playlist.artist?.name }}</a>
            } ·
            {{ playlist.nb_tracks }} треков,
            {{ getDuration(playlist.duration) }}
          </h3>
        </div>
      </div>
    </div>
    <div cdkDropList (cdkDropListDropped)="onDrop($event)" class="grid gap-1">
      @for (song of playlist?.tracks?.data; track $index) {
      <app-song [playlist]="playlist" [hideAlbum]="true" cdkDrag [song]="song" [index]="$index"></app-song>
      }
    </div>
  </div>
  }
</div>
<canvas class="hidden" id="canvas"></canvas>
